
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="tab-title">Eclipse | Standalone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link id="tab-icon" rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/gn-math/gn-math.github.io@main/favicon.png">
    <script id="preload-data">
        /* Data injection point for standalone exports */
        window._IS_EXPORTED_ = !!window._ECLIPSE_PRELOADED_DATA_;
    </script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: 'var(--primary)',
                        secondary: 'var(--secondary)',
                        accent: 'var(--accent)',
                        surface: 'var(--card-bg)'
                    },
                    animation: {
                        'slide-up': 'slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'toast': 'toastIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
                        'fade-in': 'fadeIn 0.3s ease-out forwards'
                    },
                    keyframes: {
                        slideUp: { '0%': { opacity: '0', transform: 'translateY(30px) scale(0.98)' }, '100%': { opacity: '1', transform: 'translateY(0) scale(1)' } },
                        toastIn: { '0%': { transform: 'translateY(100%) scale(0.9)', opacity: '0' }, '100%': { transform: 'translateY(0) scale(1)', opacity: '1' } },
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap');
        
        :root {
            --primary: #a855f7;
            --bg-color: #020617;
            --card-bg: rgba(255, 255, 255, 0.03);
            --glow: #a855f7;
            --header-bg: #0f172a;
        }

        /* Mode Logic */
        body[data-admin="false"] { 
            --primary: #a855f7; 
            --glow: #a855f7; 
            --header-bg: #0f172a;
        }
        body[data-admin="true"] { 
            --primary: #ef4444; 
            --glow: #ef4444; 
            --header-bg: #050000; 
            --bg-color: #050000 !important;
            --card-bg: #050000 !important;
        }

        /* Theme Mapping - Only applies if NOT in admin mode */
        body[data-admin="false"][data-theme='obsidian'] { --bg-color: #020617; }
        body[data-admin="false"][data-theme='amoled'] { --bg-color: #000000; }
        body[data-admin="false"][data-theme='cyber'] { --primary: #06b6d4 !important; --glow: #06b6d4 !important; --bg-color: #010409; }
        body[data-admin="false"][data-theme='retro'] { --primary: #f59e0b !important; --glow: #f59e0b !important; --bg-color: #1a1a1a; }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: var(--bg-color);
            color: #f1f5f9;
            transition: background-color 0.4s ease, color 0.4s ease;
            overflow-x: hidden;
        }

        #bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        
        .glass { 
            background-color: var(--header-bg); 
            backdrop-filter: blur(20px); 
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .admin-bar {
            background-color: var(--header-bg);
            border-bottom: 1px solid rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .game-card { 
            transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), box-shadow 0.3s ease; 
            border: 1px solid rgba(255, 255, 255, 0.05);
            background: var(--card-bg);
        }
        .game-card:hover { transform: translateY(-5px); box-shadow: 0 10px 40px -15px var(--primary); border-color: var(--primary); }

        .section-label { font-size: 11px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.3em; color: var(--primary); display: flex; align-items: center; gap: 15px; margin-bottom: 25px; }
        .section-label::after { content: ''; flex: 1; height: 1px; background: linear-gradient(90deg, var(--primary), transparent); opacity: 0.2; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

        .search-input { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.07); }
        body[data-admin="true"] .search-input { background: #050000; border-color: rgba(239, 68, 68, 0.3); }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@19.0.0",
        "react-dom": "https://esm.sh/react-dom@19.0.0",
        "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.460.0"
      }
    }
    </script>
</head>
<body data-theme="obsidian" data-admin="false">
    <canvas id="bg-canvas"></canvas>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useRef, useMemo } from 'react';
        import ReactDOM from 'react-dom/client';
        import { Search, Settings, X, Moon, Package, FileCode, Globe, Radio, Loader2, Sparkles, Flame, Star, Trophy, Terminal, DownloadCloud, Activity, Cpu, ShieldCheck, Share2 } from 'lucide-react';

        const PRELOADED_ZONES = window._ECLIPSE_PRELOADED_DATA_;
        const ZONES_URL = "https://cdn.jsdelivr.net/gh/gn-math/assets@main/zones.json";
        const COVER_BASE = "https://cdn.jsdelivr.net/gh/gn-math/covers@main";
        const HTML_BASE = "https://cdn.jsdelivr.net/gh/gn-math/html@main";

        const App = () => {
          const [zones, setZones] = useState(PRELOADED_ZONES || []);
          const [searchQuery, setSearchQuery] = useState('');
          const [activeUrl, setActiveUrl] = useState(null);
          const [activeName, setActiveName] = useState('');
          const [blobUrl, setBlobUrl] = useState(null);
          const [isLoading, setIsLoading] = useState(false);
          const [toasts, setToasts] = useState([]);
          const [view, setView] = useState('main'); 
          const [ms, setMs] = useState(0);
          const iframeRef = useRef(null);
          
          const [settings, setSettings] = useState(() => {
            const saved = localStorage.getItem('eclipse_settings_v14');
            return saved ? JSON.parse(saved) : { stealth: false, performance: false, theme: 'obsidian' };
          });

          const [isAdmin, setIsAdmin] = useState(() => {
              if (window._IS_EXPORTED_) return false;
              return localStorage.getItem('eclipse_admin') === 'true';
          });

          const [showSettings, setShowSettings] = useState(false);
          const [showAdminLogin, setShowAdminLogin] = useState(false);
          const [showPorter, setShowPorter] = useState(false);
          const [showVaultProxy, setShowVaultProxy] = useState(false);
          const [adminCode, setAdminCode] = useState('');
          const [customUrl, setCustomUrl] = useState('');

          const addToast = (title, desc) => {
            const id = Date.now();
            setToasts(prev => [...prev, { id, title, desc }]);
            setTimeout(() => setToasts(prev => prev.filter(t => t.id !== id)), 4000);
          };

          const resolveUrl = (t) => {
              if (!t) return "";
              if (t.startsWith("http") || t.startsWith("blob:") || t.startsWith("data:")) return t;
              let url = t.replace("{COVER_URL}", COVER_BASE).replace("{HTML_URL}", HTML_BASE);
              if (url.startsWith("//")) url = "https:" + url;
              return url;
          };

          const handleExportApp = () => {
            const docCopy = document.documentElement.cloneNode(true);
            const body = docCopy.querySelector('body');
            body.setAttribute('data-admin', 'false');
            body.setAttribute('data-theme', 'obsidian');
            
            const adminBar = docCopy.querySelector('.admin-bar');
            if (adminBar) adminBar.remove();

            const scriptIn = docCopy.querySelector('#preload-data');
            if (scriptIn) scriptIn.innerHTML = "window._IS_EXPORTED_ = true;";

            const exportZones = (zones || []).map(z => ({
                ...z,
                cover: resolveUrl(z.cover),
                url: resolveUrl(z.url)
            }));

            const script = document.createElement('script');
            script.innerHTML = `window._ECLIPSE_PRELOADED_DATA_ = ${JSON.stringify(exportZones)};`;
            docCopy.querySelector('head').appendChild(script);

            const htmlContent = '<!DOCTYPE html>\n' + docCopy.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `sagittarius_standalone.html`;
            link.click();
            URL.revokeObjectURL(url);
            addToast("Standalone Created", "Local bypass enabled.");
          };

          const handleFullscreen = () => {
            if (iframeRef.current) {
              const el = iframeRef.current;
              if (el.requestFullscreen) el.requestFullscreen();
              else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
              else if (el.msRequestFullscreen) el.msRequestFullscreen();
            }
          };

          useEffect(() => {
            if (!PRELOADED_ZONES || PRELOADED_ZONES.length === 0) {
                fetch(`${ZONES_URL}?t=${Date.now()}`)
                  .then(res => res.json())
                  .then(data => setZones(data))
                  .catch(() => addToast("Index Error", "Failed to reach archive node."));
            }

            const handleKeys = (e) => {
              if (e.ctrlKey && e.shiftKey && e.altKey && e.code === 'KeyU') {
                e.preventDefault();
                if (!window._IS_EXPORTED_) setShowAdminLogin(true);
              }
            };
            window.addEventListener('keydown', handleKeys);
            const timer = setInterval(() => setMs(Math.floor(Math.random() * 5) + 12), 4000);
            return () => { window.removeEventListener('keydown', handleKeys); clearInterval(timer); };
          }, []);

          useEffect(() => {
            localStorage.setItem('eclipse_settings_v14', JSON.stringify(settings));
            document.body.setAttribute('data-theme', settings.theme);
            document.body.setAttribute('data-admin', isAdmin);
            
            const title = document.getElementById('tab-title');
            const icon = document.getElementById('tab-icon');
            if (settings.stealth) {
                title.innerText = "Google Drive";
                icon.href = "https://ssl.gstatic.com/docs/doclist/images/drive_2022q3_32dp.png";
            } else {
                title.innerText = isAdmin ? "HELLFIRE" : "SAGITTARIUS";
                icon.href = "https://cdn.jsdelivr.net/gh/gn-math/gn-math.github.io@main/favicon.png";
            }
          }, [settings, isAdmin]);

          useEffect(() => {
            const canvas = document.getElementById('bg-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            let particles = [];
            const resize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };
            window.addEventListener('resize', resize);
            resize();
            const count = settings.performance ? 4 : 15;
            for(let i=0; i < count; i++) {
                particles.push({
                    x: Math.random() * canvas.width, y: Math.random() * canvas.height,
                    vx: (Math.random()-0.5) * 0.1, vy: (Math.random()-0.5) * 0.1,
                    s: Math.random() * 1.5, a: Math.random() * 0.15
                });
            }
            const draw = () => {
                ctx.clearRect(0,0, canvas.width, canvas.height);
                ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--primary');
                particles.forEach(p => {
                    p.x += p.vx; p.y += p.vy;
                    if(p.x < 0) p.x = canvas.width; if(p.x > canvas.width) p.x = 0;
                    if(p.y < 0) p.y = canvas.height; if(p.y > canvas.height) p.y = 0;
                    ctx.globalAlpha = p.a;
                    ctx.beginPath(); ctx.arc(p.x, p.y, p.s, 0, Math.PI*2); ctx.fill();
                });
                requestAnimationFrame(draw);
            };
            draw();
          }, [settings.performance, settings.theme, isAdmin]);

          const processedLibrary = useMemo(() => {
            return (zones || []).map(z => ({
                ...z,
                isFeatured: z.featured || false
            })).sort((a, b) => a.name.localeCompare(b.name));
          }, [zones]);

          const filteredLibrary = useMemo(() => {
            if (!searchQuery) return processedLibrary;
            return processedLibrary.filter(z => z.name.toLowerCase().includes(searchQuery.toLowerCase()));
          }, [processedLibrary, searchQuery]);

          const loadContent = async (url, name) => {
            setIsLoading(true); 
            const finalUrl = resolveUrl(url); 
            setActiveUrl(finalUrl); 
            setActiveName(name);
            
            // Fix for standalone execution:
            // When opening a local file (file://), Browsers often block Blob fetching from HTTPS sources for security.
            // We force a direct HTTPS link for the IFrame in exported mode to bypass these sandbox restrictions.
            if (window._IS_EXPORTED_ || window.location.protocol === 'file:') {
                setBlobUrl(finalUrl);
                setIsLoading(false);
                return;
            }

            try {
                const response = await fetch(finalUrl);
                if (!response.ok) throw new Error("CORS or 404");
                const text = await response.text();
                const blob = new Blob([text], { type: 'text/html' });
                const bUrl = URL.createObjectURL(blob);
                if(blobUrl) URL.revokeObjectURL(blobUrl);
                setBlobUrl(bUrl);
            } catch (err) { 
                console.warn("Blob load failed, falling back to direct source.", err);
                setBlobUrl(finalUrl); 
            } finally { setIsLoading(false); }
          };

          const handleArchiveIframe = async () => {
            if (!activeUrl) return;
            try {
                const res = await fetch(activeUrl);
                const text = await res.text();
                const blob = new Blob([text], { type: 'text/html' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `${activeName.replace(/\s+/g, '_').toLowerCase()}.html`;
                link.click();
                addToast("Capture Success", "File downloaded.");
            } catch { addToast("Capture Error", "Security policy blocked download."); }
          };

          return React.createElement('div', { className: "min-h-screen flex flex-col selection:bg-primary/20" }, [
            
            isAdmin && !window._IS_EXPORTED_ && React.createElement('div', { key: 'admin-bar', className: "admin-bar sticky top-0 z-[100] px-4 py-2 flex items-center justify-between text-[10px] uppercase font-bold" }, [
                React.createElement('div', { className: "flex items-center gap-6" }, [
                    React.createElement('div', { className: "flex items-center gap-2" }, [React.createElement(ShieldCheck, { size: 12 }), "SAGITTARIUS Master Console"]),
                    React.createElement('div', { className: "hidden sm:flex gap-4 opacity-70 font-mono" }, [
                        React.createElement('div', { className: "flex items-center gap-1.5" }, [React.createElement(Activity, { size: 12 }), `${ms}ms`]),
                        React.createElement('div', { className: "flex items-center gap-1.5" }, [React.createElement(Cpu, { size: 12 }), "Kernel Linked"])
                    ])
                ]),
                React.createElement('div', { className: "flex items-center gap-4" }, [
                    React.createElement('button', { onClick: handleExportApp, className: "hover:text-white transition-colors flex items-center gap-1.5" }, [React.createElement(Share2, { size: 12 }), "Export_Binary"]),
                    React.createElement('button', { onClick: () => setShowPorter(true), className: "hover:text-white flex items-center gap-1.5" }, [React.createElement(Package, { size: 12 }), "Port_Local"]),
                    React.createElement('button', { onClick: () => setShowVaultProxy(true), className: "hover:text-white flex items-center gap-1.5" }, [React.createElement(Globe, { size: 12 }), "Tunnel"]),
                    React.createElement('button', { onClick: () => { setIsAdmin(false); localStorage.setItem('eclipse_admin', 'false'); }, className: "hover:text-white bg-red-500/10 px-2 py-1 rounded" }, "Exit")
                ])
            ]),

            React.createElement('header', { key: 'head', className: `glass sticky z-[60] px-6 py-4 transition-all ${isAdmin && !window._IS_EXPORTED_ ? 'top-[36px]' : 'top-0'}` }, 
              React.createElement('div', { className: "max-w-7xl mx-auto flex items-center justify-between gap-6" }, [
                React.createElement('div', { className: "flex items-center gap-3 cursor-pointer group", onClick: () => window.location.reload() }, [
                    React.createElement('div', { className: "p-2 bg-primary rounded-xl transition-all shadow-lg" }, React.createElement(Moon, { size: 18, className: "text-white" })),
                    React.createElement('h1', { className: "text-xl font-black text-white italic" }, isAdmin ? "HELLFIRE" : "SAGITTARIUS")
                ]),
                React.createElement('div', { className: "flex-1 max-w-sm relative" }, [
                    React.createElement(Search, { size: 14, className: "absolute left-4 top-1/2 -translate-y-1/2 text-white/30" }),
                    React.createElement('input', { 
                        type: 'text', placeholder: "Search the archive...", 
                        className: "w-full pl-10 pr-4 py-2 search-input rounded-xl text-xs outline-none focus:border-primary transition-all",
                        value: searchQuery, onChange: e => setSearchQuery(e.target.value)
                    })
                ]),
                React.createElement('div', { className: "flex gap-3 items-center" }, [
                    React.createElement('button', { onClick: () => setShowSettings(true), className: "p-2.5 hover:bg-white/10 rounded-xl transition-all" }, React.createElement(Settings, { size: 20 }))
                ])
              ])
            ),

            React.createElement('div', { key: 'toasts', className: "fixed bottom-6 right-6 z-[2000] flex flex-col gap-3 pointer-events-none" }, 
                toasts.map(t => React.createElement('div', { key: t.id, className: "glass p-4 rounded-xl border-primary/20 flex items-center gap-3 animate-toast shadow-2xl pointer-events-auto" }, [
                    React.createElement(Trophy, { size: 16, className: "text-primary" }),
                    React.createElement('div', {}, [
                        React.createElement('p', { className: "text-[10px] font-bold uppercase tracking-widest text-white" }, t.title),
                        React.createElement('p', { className: "text-[9px] text-white/40 mt-0.5" }, t.desc)
                    ])
                ]))
            ),

            React.createElement('main', { key: 'main', className: "flex-1 max-w-7xl mx-auto w-full p-6" }, [
                React.createElement('section', {}, [
                    React.createElement('div', { className: "section-label" }, searchQuery ? "Search" : "Global Archive"),
                    React.createElement('div', { className: "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6" }, 
                        filteredLibrary.map((zone, i) => (
                            React.createElement('div', {
                                key: zone.id, onClick: () => loadContent(zone.url, zone.name), 
                                className: "game-card rounded-2xl overflow-hidden cursor-pointer animate-slide-up"
                            }, [
                                React.createElement('div', { className: "aspect-square bg-black/40" }, React.createElement('img', { src: resolveUrl(zone.cover), className: "w-full h-full object-cover", loading: "lazy" })),
                                React.createElement('div', { className: "p-3" }, [
                                    React.createElement('h3', { className: "text-[10px] font-bold uppercase text-white truncate opacity-80" }, zone.name)
                                ])
                            ])
                        ))
                    )
                ])
            ]),

            showSettings && React.createElement('div', { key: 'modal-settings', className: "fixed inset-0 z-[1000] flex items-center justify-center bg-black/80 backdrop-blur-md p-6" }, 
                React.createElement('div', { className: "glass rounded-[2rem] p-10 max-w-xl w-full max-h-[80vh] flex flex-col" }, [
                    React.createElement('div', { className: "flex justify-between items-center mb-8 shrink-0" }, [
                        React.createElement('div', { className: "flex gap-6" }, [
                            React.createElement('button', { onClick: () => setView('main'), className: `text-[10px] font-bold uppercase tracking-widest pb-1 border-b-2 transition-all ${view === 'main' ? 'text-primary border-primary' : 'text-white/40 border-transparent'}` }, "System"),
                            React.createElement('button', { onClick: () => setView('about'), className: `text-[10px] font-bold uppercase tracking-widest pb-1 border-b-2 transition-all ${view === 'about' ? 'text-primary border-primary' : 'text-white/40 border-transparent'}` }, "Catalog")
                        ]),
                        React.createElement('button', { onClick: () => setShowSettings(false) }, React.createElement(X, { size: 24 }))
                    ]),
                    React.createElement('div', { className: "flex-1 overflow-y-auto no-scrollbar pr-2" }, 
                        view === 'main' ? React.createElement('div', { className: "space-y-10 animate-fade-in" }, [
                            !isAdmin && React.createElement('div', {}, [
                                React.createElement('h4', { className: "text-[9px] font-bold uppercase text-white/30 tracking-widest mb-4" }, "UI Themes"),
                                React.createElement('div', { className: "grid grid-cols-4 gap-4" }, ['obsidian', 'amoled', 'cyber', 'retro'].map(t => (
                                    React.createElement('button', { key: t, onClick: () => setSettings({...settings, theme: t}), className: `aspect-square rounded-xl border-2 transition-all p-1 ${settings.theme === t ? 'border-primary' : 'border-transparent bg-white/5'}` }, React.createElement('div', { className: `w-full h-full rounded-lg ${t === 'obsidian' ? 'bg-purple-600' : t === 'amoled' ? 'bg-slate-300' : t === 'cyber' ? 'bg-cyan-400' : 'bg-orange-500'}` }))
                                )))
                            ]),
                            isAdmin && React.createElement('div', { className: "p-4 border border-primary/20 bg-primary/5 rounded-xl text-center" }, [
                                React.createElement(Flame, { size: 20, className: "mx-auto mb-2 text-primary" }),
                                React.createElement('p', { className: "text-[10px] font-bold uppercase text-white/60" }, "Hellfire mode: Standard themes disabled.")
                            ]),
                            React.createElement('div', { className: "space-y-6" }, [
                                React.createElement('div', { className: "flex items-center justify-between" }, [
                                    React.createElement('div', {}, [React.createElement('p', { className: "text-[10px] font-bold uppercase" }, "Stealth Cloak")]),
                                    React.createElement('button', { onClick: () => setSettings({...settings, stealth: !settings.stealth}), className: `w-10 h-5 rounded-full px-1 ${settings.stealth ? 'bg-primary' : 'bg-white/10'}` }, React.createElement('div', { className: `w-3 h-3 bg-white rounded-full transition-all ${settings.stealth ? 'translate-x-5' : ''}` }))
                                ]),
                                React.createElement('div', { className: "flex items-center justify-between" }, [
                                    React.createElement('div', {}, [React.createElement('p', { className: "text-[10px] font-bold uppercase" }, "Low Latency UI")]),
                                    React.createElement('button', { onClick: () => setSettings({...settings, performance: !settings.performance}), className: `w-10 h-5 rounded-full px-1 ${settings.performance ? 'bg-primary' : 'bg-white/10'}` }, React.createElement('div', { className: `w-3 h-3 bg-white rounded-full transition-all ${settings.performance ? 'translate-x-5' : ''}` }))
                                ])
                            ])
                        ]) : React.createElement('div', { className: "space-y-8 pb-4 animate-fade-in" }, [
                            React.createElement('div', { className: "glass p-6 rounded-2xl border-primary/20 bg-primary/5 shadow-inner" }, [
                                React.createElement('h4', { className: "text-[10px] font-black uppercase text-primary mb-4" }, "SAGITTARIUS Infrastructure"),
                                React.createElement('div', { className: "space-y-4" }, [
                                    React.createElement('div', { className: "flex gap-4" }, [
                                        React.createElement(Terminal, { size: 16, className: "text-secondary" }),
                                        React.createElement('div', {}, [React.createElement('p', { className: "text-[11px] font-bold" }, "SAGITTARIUS Core"), React.createElement('p', { className: "text-[9px] text-white/40" }, "Proprietary standalone gaming architecture.")])
                                    ]),
                                    React.createElement('div', { className: "flex gap-4" }, [
                                        React.createElement(Sparkles, { size: 16, className: "text-primary" }),
                                        React.createElement('div', {}, [React.createElement('p', { className: "text-[11px] font-bold" }, "Official Archive"), React.createElement('p', { className: "text-[9px] text-white/40" }, "Curated high-performance unblocked games.")])
                                    ])
                                ])
                            ]),
                            React.createElement('div', { className: "grid grid-cols-1 gap-1" }, 
                                processedLibrary.map(z => React.createElement('div', { key: `cat-${z.id}`, className: "text-[9px] py-2 px-4 bg-white/5 rounded-lg flex justify-between items-center" }, [
                                    React.createElement('span', { className: "text-white/80" }, z.name)
                                ]))
                            )
                        ])
                    )
                ])
            ),

            showAdminLogin && React.createElement('div', { key: 'modal-admin', className: "fixed inset-0 z-[1100] flex items-center justify-center bg-black/95 p-6" }, 
                React.createElement('form', { 
                    onSubmit: (e) => { 
                        e.preventDefault(); 
                        if(adminCode === '4739') { setIsAdmin(true); localStorage.setItem('eclipse_admin', 'true'); setShowAdminLogin(false); addToast("Auth established", "Protocol unlocked."); }
                        else addToast("Error", "Security check failed.");
                    },
                    className: "glass p-12 rounded-[2.5rem] max-w-sm w-full space-y-6 border-red-500/30"
                }, [
                    React.createElement('p', { className: "text-center text-[10px] font-bold uppercase text-red-500" }, "HELLFIRE DECRYPTOR"),
                    React.createElement('input', { type: 'password', autoFocus: true, value: adminCode, onChange: e => setAdminCode(e.target.value), className: "w-full bg-black border border-white/5 rounded-xl p-4 text-center text-4xl text-white outline-none focus:border-red-500" }),
                    React.createElement('button', { type: 'submit', className: "w-full py-4 bg-red-600 text-white font-bold uppercase text-[10px] rounded-xl" }, "Initialize")
                ])
            ),

            showPorter && React.createElement('div', { key: 'modal-porter', className: "fixed inset-0 z-[1500] flex items-center justify-center bg-black/80 p-6" }, 
                React.createElement('div', { className: "glass rounded-3xl p-8 max-w-md w-full" }, [
                    React.createElement('div', { className: "flex justify-between mb-8" }, [React.createElement('h3', { className: "text-xs font-bold" }, "LOCAL INJECT"), React.createElement('button', { onClick: () => setShowPorter(false) }, React.createElement(X, { size: 24 }))]),
                    React.createElement('input', { type: 'file', accept: ".html", onChange: (e) => {
                        const file = e.target.files[0]; if(!file) return;
                        const reader = new FileReader();
                        reader.onload = (ev) => {
                            const blob = new Blob([ev.target.result], { type: 'text/html' });
                            const localUrl = URL.createObjectURL(blob);
                            setBlobUrl(localUrl); setActiveUrl(localUrl); setActiveName(file.name); setShowPorter(false);
                        };
                        reader.readAsText(file);
                    }, className: "w-full p-4 border border-white/10 rounded-xl" })
                ])
            ),

            showVaultProxy && React.createElement('div', { key: 'modal-proxy', className: "fixed inset-0 z-[1500] flex items-center justify-center bg-black/80 p-6" }, 
                React.createElement('div', { className: "glass rounded-3xl p-8 max-w-md w-full" }, [
                    React.createElement('div', { className: "flex justify-between mb-8" }, [React.createElement('h3', { className: "text-xs font-bold" }, "UPLINK TUNNEL"), React.createElement('button', { onClick: () => setShowVaultProxy(false) }, React.createElement(X, { size: 24 }))]),
                    React.createElement('input', { type: 'text', placeholder: "Target node...", className: "w-full p-4 bg-black rounded-xl text-xs mb-4", value: customUrl, onChange: e => setCustomUrl(e.target.value) }),
                    React.createElement('button', { onClick: () => { if(!customUrl) return; loadContent(customUrl, "Vault Uplink"); setShowVaultProxy(false); }, className: "w-full py-4 bg-primary text-white font-bold rounded-xl" }, "Tunnel")
                ])
            ),

            activeUrl && React.createElement('div', { key: 'viewport', className: "fixed inset-0 z-[1200] bg-black flex flex-col" }, [
                React.createElement('div', { className: "glass p-3 flex justify-between items-center" }, [
                    React.createElement('div', { className: "flex items-center gap-3" }, [React.createElement(Radio, { size: 14, className: "text-secondary animate-pulse" }), React.createElement('span', { className: "text-[10px] font-bold uppercase text-secondary" }, activeName)]),
                    React.createElement('div', { className: "flex gap-2" }, [
                        React.createElement('button', { onClick: handleArchiveIframe, className: "px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-[9px] font-bold flex items-center gap-2 hover:bg-white/10 transition-all" }, [React.createElement(DownloadCloud, { size: 12 }), "Capture"]),
                        React.createElement('button', { onClick: handleFullscreen, className: "px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-[9px] font-bold hover:bg-white/10 transition-all" }, "Fullscreen"),
                        React.createElement('button', { onClick: () => { setActiveUrl(null); setBlobUrl(null); if (blobUrl) URL.revokeObjectURL(blobUrl); }, className: "p-2 bg-red-500/10 text-red-500 rounded-lg" }, React.createElement(X, { size: 16 }))
                    ])
                ]),
                React.createElement('div', { className: "flex-1 relative bg-white" }, [
                    isLoading && React.createElement('div', { className: "absolute inset-0 bg-black flex items-center justify-center z-10" }, React.createElement(Loader2, { className: "animate-spin text-primary", size: 32 })),
                    blobUrl && React.createElement('iframe', { ref: iframeRef, src: blobUrl, key: blobUrl, className: "w-full h-full border-none", allow: "fullscreen; autoplay; encrypted-media; picture-in-picture" })
                ])
            ])
          ]);
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
